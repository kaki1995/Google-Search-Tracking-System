<!DOCTYPE html>
<html>
<head>
    <title>Quick Persistence Test</title>
</head>
<body>
    <h1>Quick Response Persistence Test</h1>
    <p>This will set up test data that should load in the Background Survey</p>
    
    <button onclick="setupAndTest()">Setup Test Data & Open App</button>
    <button onclick="clearAll()">Clear All Data</button>
    
    <div id="output"></div>

    <script>
        const output = document.getElementById('output');
        
        function log(message) {
            console.log(message);
            output.innerHTML += '<div>' + message + '</div>';
        }

        function setupAndTest() {
            output.innerHTML = '';
            log('üöÄ Setting up test data...');
            
            // Clear any existing data first
            localStorage.clear();
            
            // Create a participant ID
            const participantId = crypto.randomUUID();
            localStorage.setItem('participant_id', participantId);
            log('‚úÖ Created participant ID: ' + participantId);
            
            // Create test responses
            const testData = {
                age: "25-34",
                gender: "female",
                education: "masters",
                employment: "full-time",
                nationality: "Canada",
                country: "Canada",
                experience_scale_q7: "4",
                familiarity_scale_q8: "3",
                search_frequency: "daily"
            };
            
            const saveData = {
                data: testData,
                timestamp: new Date().toISOString(),
                participantId: participantId
            };
            
            localStorage.setItem('background_survey_responses', JSON.stringify(saveData));
            log('‚úÖ Saved test responses');
            log('üìã Test data: ' + JSON.stringify(testData, null, 2));
            
            log('');
            log('üéØ Now go to: http://localhost:8083');
            log('üìç Navigate: Welcome ‚Üí Background Survey');
            log('üîç Check if form is pre-filled with the above data!');
            log('üõ†Ô∏è Open browser console (F12) to see debug messages');
            
            // Open the app
            setTimeout(() => {
                window.open('http://localhost:8083', '_blank');
            }, 1000);
        }

        function clearAll() {
            localStorage.clear();
            output.innerHTML = '';
            log('üóëÔ∏è Cleared all data');
        }
    </script>
</body>
</html>
